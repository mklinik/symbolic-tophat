% !TEX root=../main.tex


\section{Calculus}
\label{sec:language}

The calculus presented in this section is nearly identical to the original semantics of \TOPHAT.
The main difference between the semantics listed here, is the accommodation of symbols.
Symbols can be considered place-holder variables for expected input.
Symbols are treated as values, symbols have a type, and operations can be performed on symbols.
The following subsections describe in detail how all elements of the \TOPHAT language deal with the accommodation of symbols.


\subsection{Expressions}
\label{expressions}

The syntax of \TOPHAT is listed in Figure~\ref{syntaxtophat}

\begin{figure}
\usemacro{G-Language}

\usemacro{G-Pretasks}
\label{syntaxtophat}

\caption{Syntax of \TOPHAT expressions.}
\end{figure}

Two main changes have been made with regards to the original \TOPHAT semantics.
One, symbols $s$ have been added to the syntax of expressions.
However, they are not indeded to be used by programmers, just like locations $l$.
Instead, they are generated by the semantics as placeholders for inputs.

Two, unary and binary operations have been made explicit.

\subsection{Types}

The types of \TOPHAT remain the same.

\usemacro{G-Types}

However, we do need an additional typing rule, S-Var, to type symbols,
since they are now part of our expression syntax.
This requires an additional typing environment $\Delta$.

\userule{S-Var}

\subsection{Values}

As mentioned before, symbols are considered to be values.
They have therefore been added to the list of values.

\usemacro{G-Values}

As a result, we must now also regard unary and binary operations as values.
This is due to the fact that the symbols are placeholders for actual values.

\usemacro{G-Tasks}


\subsection{Inputs}

In symbolic execution, we do not know what the input of a program will be.
In the case of \TOPHAT, this means that we do not know the user input, but have to put in placeholder symbols.
This is reflected in the definition of symbolic inputs below.

\usemacro{G-Inputs}

Inputs now only consist of a potential path consisting of one or more $\First$ and $\Second$,
followed by a symbol $s$.
This symbol is a placeholder for all concrete inputs, this can either be a constant, a continue command or a choice between left or right.
This means that editors can no longer be set to a value $v$, but will instead hold a symbol $s$ after user input.


\subsection{Predicates}

When the execution of a \TOPHAT program takes a certain path, there are always certain conditions to arrive at that point.
A user selects the left task, a user enters a value, that is used to select the next task, etc.
Since this in formation is not available during symbolic execution, we need to record how the path depends on the input.

This is done by means of predicates.
Below, the syntax of these predicates is listed.

\usemacro{G-Predicates}

Predicates can contain symbols, constants and operations on them.
